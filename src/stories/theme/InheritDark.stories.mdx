import { Meta, Story, Canvas, Source } from '@storybook/addon-docs';
import { hasDarkSystemTheme } from '../../utils';

<Meta title='Theme/Dark mode'
  parameters={{
    viewMode: 'docs',
  }}
  decorators={[
    (Story) => (
      <>
        <style>{`p:not(.sbdocs) { padding: 1rem; }`}</style>
        <Story />
      </>
    ),
  ]}
/>

# Dark mode

Inherit a dark system theme via CSS media query, classes, and CSS Vars:

<Story name="Inherit via CSS">
  {() => {
    return (
      <div
        id="inherit-css"
        className="bg-backg-primary text-primary"
      >
        <style type="text/css">
          {`@media (prefers-color-scheme: dark) {
            :root #inherit-css {
              --text-primary: var(--white-100);
              --backg-primary: var(--black-100);
            }`}
          }
        </style>
        <p>
          If system theme is dark, I auto-render with dark theme colors
        </p>
      </div>
    )
  }}
</Story>

<Source
  language='html'
  dark
  format
  code={`
<div
  id="inherit-css"
  className="bg-backg-primary text-primary"
>
  <style type="text/css">
    @media (prefers-color-scheme: dark) {
      :root #inherit-css {
        --text-primary: var(--white-100);
        --backg-primary: var(--black-100);
      }
    }
  </style>
  <p>
    If system theme is dark, I auto-render with dark theme colors
  </p>
</div>
  `}
/>

-----
Inherit a dark system theme via JavaScript and classes:

<Story name="Inherit via JavaScript">
  {() => (
    <section
      className={
        `bg-backg-primary text-primary ${hasDarkSystemTheme() && 'dark'}`
      }
    >
      <p>I also render in dark if system theme is dark</p>
    </section>
  )}
</Story>

<Source
  language='jsx'
  dark
  format
  code={`
<section className={\`bg-backg-primary text-primary \${hasDarkSystemTheme() && 'dark'\}\`}>
  <p>I also render in dark if system theme is dark</p>
</section>
  `}
/>
